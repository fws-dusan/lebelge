jQuery(function(a){a(document).ready(function(){var a=localStorage.getItem("wcap_popup_displayed_next_time");null!=a&&(new Date).getTime()>a&&(localStorage.removeItem("wcap_popup_displayed_next_time"),localStorage.removeItem("wcap_popup_displayed")),localStorage.setItem("wcap_avoid_multiple","no")});var t="",_={wcap_heading_section_text_email:wcap_atc_modal_param.wcap_atc_head,wcap_text_section_text_field:wcap_atc_modal_param.wcap_atc_text,wcap_email_placeholder_section_input_text:wcap_atc_modal_param.wcap_atc_email_place,wcap_button_section_input_text:wcap_atc_modal_param.wcap_atc_button,wcap_button_bg_color:wcap_atc_modal_param.wcap_atc_button_bg_color,wcap_button_text_color:wcap_atc_modal_param.wcap_atc_button_text_color,wcap_popup_text_color:wcap_atc_modal_param.wcap_atc_popup_text_color,wcap_popup_heading_color:wcap_atc_modal_param.wcap_atc_popup_heading_color,wcap_non_mandatory_modal_input_text:wcap_atc_modal_param.wcap_atc_non_mandatory_input_text,wcap_phone_placeholder_section_input_text:wcap_atc_modal_param.wcap_atc_phone_place,wcap_atc_button:{backgroundColor:wcap_atc_modal_param.wcap_atc_button_bg_color,color:wcap_atc_modal_param.wcap_atc_button_text_color},wcap_atc_popup_text:{color:wcap_atc_modal_param.wcap_atc_popup_text_color},wcap_atc_popup_heading:{color:wcap_atc_modal_param.wcap_atc_popup_heading_color}};a(document.body).on("wc_fragments_refreshed",function(t){if(t.target.innerHTML.indexOf("button wc-forward")>=0){var _=localStorage.getItem("wcap_popup_displayed");if(void 0===typeof _||"yes"!=_){localStorage.setItem("wcap_popup_displayed","yes");var e=new Date;e.setHours(e.getHours()+24),localStorage.setItem("wcap_popup_displayed_next_time",e.getTime());var c={wcap_atc_email:localStorage.getItem("wcap_hidden_email_id"),wcap_atc_user_action:localStorage.getItem("wcap_atc_user_action"),wcap_atc_template_id:wcap_atc_modal_param.wcap_atc_template_id,wcap_atc_phone:localStorage.getItem("wcap_atc_phone_number"),action:"wcap_atc_store_guest_email"};a.post(wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_store_guest_email"),c,function(a,t,_){"success"===t&&a&&(o(),localStorage.setItem("wcap_abandoned_id",a))})}}});var e=function(){a(document).on("click",".single_add_to_cart_button",this.wcap_on_single_add_to_cart).on("click",".llms-button-action",this.wcap_on_single_add_to_cart).on("click",".add_to_cart_button",this.wcap_on_single_add_to_cart).on("added_to_cart",this.updateButton).on("click",".wcap_popup_button",this.wcap_add_to_cart_from_shop).on("click",".wcap_popup_non_mandatory_button",this.wcap_add_product_to_cart).on("click",".wcap_popup_close",c),a(document).on("keydown",function(a){27==a.keyCode&&o()})};function c(){var t={template_id:wcap_atc_modal_param.wcap_atc_template_id,stats_action:"wcap_atc_dismissed",action:"wcap_atc_stats_record"};a.post(wcap_atc_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_stats_record"),t,function(a,t,_){"on"===wcap_atc_modal_param.wcap_close_icon_add_to_cart?l():o()})}function o(){a(document.body).removeClass("wcap-atc-modal-open wcap-modal-loading"),a(".wcap-modal, .wcap-modal-overlay").remove(),localStorage.setItem("wcap_avoid_multiple","no")}function p(){a("#wcap_coupon_auto_applied").length>0?(a("#wcap_coupon_auto_applied").text(wcap_atc_modal_param.wcap_atc_coupon_applied_msg),a("#wcap_coupon_auto_applied").fadeIn(),$timer=parseInt(wcap_atc_modal_param.wcap_coupon_msg_fadeout_timer),setTimeout(function(){a("#wcap_coupon_auto_applied").fadeOut(),wcap_get_client_email=a("#wcap_popup_input").val(),localStorage.setItem("wcap_hidden_email_id",wcap_get_client_email),a("#wcap_atc_phone").length>0&&localStorage.setItem("wcap_atc_phone_number",a("#wcap_atc_phone").val()),localStorage.setItem("wcap_atc_user_action","yes"),l()},$timer)):(wcap_get_client_email=a("#wcap_popup_input").val(),localStorage.setItem("wcap_hidden_email_id",wcap_get_client_email),a("#wcap_atc_phone").length>0&&localStorage.setItem("wcap_atc_phone_number",a("#wcap_atc_phone").val()),localStorage.setItem("wcap_atc_user_action","yes"),l())}function l(){var _=localStorage.getItem("wcap_popup_displayed");if(void 0!==typeof _&&"yes"==_||(wcap_get_client_email=a("#wcap_popup_input").val(),localStorage.setItem("wcap_hidden_email_id",wcap_get_client_email)),o(),a("form.cart").length>0)$form=a("form.cart"),$form.append('<input type="hidden" name="add-to-cart" value="'+t+'" />'),$form.submit();else{var e=a(".ajax_add_to_cart").attr("href");if(a(".llms-button-action").length>0)e=a(".llms-button-action").attr("href");window.location=e}}e.prototype.wcap_on_single_add_to_cart=function(e){var c=localStorage.getItem("wcap_popup_displayed");void 0!==typeof c&&"yes"==c||""!=wcap_atc_modal_param.wcap_populate_email||"yes"===localStorage.getItem("wcap_mailchimp_captured")||"yes"===localStorage.getItem("wcap_avoid_multiple")||(e.preventDefault(),""==(t=a(this).data("product_id")?a(this).data("product_id"):this.value)&&(t=document.getElementsByName("add-to-cart")[0].value),a("#wcap-add-to-cart").val(t),function(){a(document.body).addClass("wcap-atc-modal-open").append('<div class="wcap-modal-overlay"></div>'),a(document.body).append('<div class="wcap-modal" style="overflow-y:auto; max-height:90%;"><div class="wcap-modal__contents"> '+wcap_atc_modal_param.wcap_atc_modal_data+" </div> </div>"),function(){a(".wcap-modal__body").removeProp("style");var t=a(".wcap-modal__header").outerHeight(),_=a(".wcap-modal").height(),e=a(".wcap-modal").width(),c=a(".wcap-modal__body").outerHeight()+t;a(".wcap-modal").css({"margin-left":-e/2,"margin-top":-_/2}),_<c-5&&a(".wcap-modal__body").height(_-t)}(),a(document.body).trigger("wcap_after_atc_load");var t={template_id:wcap_atc_modal_param.wcap_atc_template_id,stats_action:"wcap_atc_opened",action:"wcap_atc_stats_record"};a.post(wcap_atc_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_stats_record"),t,function(a,t,_){localStorage.setItem("wcap_atc_template_id",wcap_atc_modal_param.wcap_atc_template_id)});new Vue({el:"#wcap_popup_main_div",data:_});a(".wcap_popup_button").prop("disabled",!0),a("#wcap_popup_input").on("input",function(t){var _=a("#wcap_popup_input").val(),e=a(".wcap_popup_button").is(":disabled");_.length>0&&1==e?a(".wcap_popup_button").prop("disabled",!1):0==_.length&&0==e&&a(".wcap_popup_button").prop("disabled",!0)})}(),localStorage.setItem("wcap_avoid_multiple","yes")),""!=wcap_atc_modal_param.wcap_populate_email&&(localStorage.setItem("wcap_hidden_email_id",wcap_atc_modal_param.wcap_populate_email),localStorage.setItem("wcap_atc_user_action","yes"))},e.prototype.wcap_add_to_cart_from_shop=function(t){t.preventDefault();var _=a("#wcap_popup_input").val();if(new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(_))if(wcap_atc_modal_param.wcap_debounce_key){var e={async:!0,crossDomain:!0,url:"https://api.debounce.io/v1/?api="+wcap_atc_modal_param.wcap_debounce_key+"&email="+_,method:"GET",headers:{}};a.ajax(e).done(function(t){"1"===t.success?"4"===t.debounce.code||"5"===t.debounce.code||"8"===t.debounce.code?p():(a("#wcap_placeholder_validated_msg").text(wcap_atc_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)):p()}).fail(function(a){p()})}else p();else a("#wcap_placeholder_validated_msg").text(wcap_atc_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)},e.prototype.updateButton=function(t,_,e,c){if(c=void 0!==c&&c){if(!wcap_atc_modal_param.is_cart){var p=localStorage.getItem("wcap_popup_displayed");if(void 0===typeof p||"yes"!=p){localStorage.setItem("wcap_popup_displayed","yes");var l=new Date;l.setHours(l.getHours()+24),localStorage.setItem("wcap_popup_displayed_next_time",l.getTime());var d={wcap_atc_email:localStorage.getItem("wcap_hidden_email_id"),wcap_atc_user_action:localStorage.getItem("wcap_atc_user_action"),wcap_atc_template_id:wcap_atc_modal_param.wcap_atc_template_id,wcap_atc_phone:localStorage.getItem("wcap_atc_phone_number"),action:"wcap_atc_store_guest_email"};a.post(wcap_atc_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_store_guest_email"),d,function(a,t,_){"success"===t&&a&&(localStorage.setItem("wcap_abandoned_id",a),o())})}}a(document.body).trigger("wc_cart_button_updated",[c]),_&&(a.each(_,function(t){a(t).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}})}),a.each(_,function(t,_){a(t).replaceWith(_),a(t).stop(!0).css("opacity","1").unblock()}),a(document.body).trigger("wc_fragments_loaded"))}},e.prototype.wcap_add_product_to_cart=function(t){t.preventDefault();var _={template_id:wcap_atc_modal_param.wcap_atc_template_id,stats_action:"wcap_atc_no_thanks",action:"wcap_atc_stats_record"};a.post(wcap_atc_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_stats_record"),_,function(t,_,e){if("off"==wcap_atc_modal_param.wcap_atc_mandatory_email)localStorage.setItem("wcap_atc_user_action","no"),l(),o();else{var c=a("#wcap_popup_input").val(),p=wcap_atc_modal_param.wcap_mandatory_text;c&&(p=wcap_atc_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").text(p),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)}})},new e});