jQuery(document).ready(function(t){t("#wcap_print, #wcap_csv").click(function(e){e.preventDefault();let a=t(this),n=t(this).prop("id").split("_");n=n[1],t(".wcap-view-abandoned-orders-msg").html('<div id="wcap_myProgress"><div id="wcap_myBar" data-added="0">0%</div></div>'),a.hasClass("button-disabled")||(t(".wcap-export").addClass("button-disabled"),function e(a,n){let d=t(".top .displaying-num").text();d=d.split(" ");d=d[0];d=parseInt(d.replace(/,/g,""));let o=t("#wcap_myBar").data("added");let i=t("#cart_status").val();let c=t("#hidden_start").val();let r=t("#hidden_end").val();const s=new URLSearchParams(window.location.search);let p=s.has("wcap_section")?s.get("wcap_section"):"";var l={filter_status:i,start_date:c,end_date:r,wcap_section:p,total_items:d,done_items:o,csv_print:n,action:"wcap_data_export",step:a};t.post(ajaxurl,l,function(t){}).done(function(d){if("done"==d.step||d.error||d.success)if(t(".wcap-export").removeClass("button-disabled"),d.error){var o=d.message;t(".wcap-view-abandoned-orders-msg").html('<div class="updated error"><p>'+o+"</p></div>")}else t("#wcap_myBar").animate({width:"100%"},50,function(){t(".wcap-view-abandoned-orders-msg").html("")}),"print"==n?(!function(){let t=document.getElementById("wcap_print_data").outerHTML,e=window.open();e.document.open(),e.document.write('<html><head><title>Print Abandoned Carts</title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body>'),e.document.write(t),e.document.write("</body></html>"),e.document.close(),e.print()}(),t(".wcap-view-cart-data").html("")):window.location=d.url;else{if("print"==n){let e=d.html_data;1==a?t(".wcap-view-cart-data").html(e):t("#wcap_print_data").append(e)}t("#wcap_myBar").data("added",d.added),t("#wcap_myBar").animate({width:d.percentage+"%"},50,function(){}),t("#wcap_myBar").text(d.percentage+"%"),console.log(d.step),e(parseInt(d.step),n)}}).fail(function(t){window.console&&window.console.log&&console.log(t)})}(1,n))})});