function wcap_add_new_rule_row(e){document.getElementById("wcap-rule-list-header").style.display="table-header-group",(e=document.getElementById(e)).remove();var t=document.getElementsByClassName("wcap-rule-list"),a=t[0].tBodies[0].rows.length+1,c=t[0].getAttribute("data-row"),r=document.getElementById("wcap-rule-list-body").insertRow();r.id=a;var n="wcap_rule_type_"+a,l="wcap_rule_condition_"+a,u="wcap_rule_value_"+a,s="wcap_rule_delete_"+a,d=(c=(c=(c=(c=(c=c.replace(/'wcap_rule_type_'/g,n)).replace(/'wcap_rule_condition_'/g,l)).replace(/'wcap_rule_value_'/g,u)).replace(/'wcap_rule_delete_'/g,s)).replace(/'<td>'/g,"")).split("</td>"),_=r.insertCell(0);_.innerHTML=d[0];var o=r.insertCell(1);o.innerHTML=d[1];var i=r.insertCell(2);i.innerHTML=d[2],r.insertCell(3).innerHTML=d[3],_.style.width="25%",o.style.width="23%",i.style.width="30%"}function wcap_rule_values(e){var t=document.getElementById(e).value,a=e.substr(-1),c="wcap_rule_value_"+a,r=document.getElementById(c),n="wcap_rule_condition_"+a;document.getElementById(n);if(""!==t){if("SELECT"===r.nodeName){for(;r.options.length>0;)r.remove(0);r.removeAttribute("onChange")}if(jQuery("#"+c).hasClass("select2-hidden-accessible")){jQuery("#"+c).select2("destroy");document.querySelector(c);const e=document.createElement("select");e.setAttribute("class","wcap_rule_value"),e.setAttribute("id",c),e.setAttribute("name",c),r.parentNode.replaceChild(e,r),r=document.getElementById(c)}switch(t){case"custom_pages":r.setAttribute("class","wcap_rule_value wc-product-search"),r.setAttribute("multiple","multiple"),r.setAttribute("data-action","wcap_json_find_pages"),r.setAttribute("name",c+"[]"),r.setAttribute("data-placeholder",wcap_atc_rules_params.wcap_custom_pages),r.setAttribute("style","width:90%;"),jQuery(".wc-product-search").selectWoo(),jQuery(document.body).trigger("wc-enhanced-select-init");break;case"product_cat":var l=document.getElementById(a).cells[2];console.log(l),r.setAttribute("class","wcap_rule_value wc-product-search"),r.setAttribute("multiple","multiple"),r.setAttribute("data-action","wcap_json_find_product_cat"),r.setAttribute("name",c+"[]"),r.setAttribute("data-placeholder",wcap_atc_rules_params.wcap_prod_cat_select),r.setAttribute("style","width:90%;"),jQuery(".wc-product-search").selectWoo(),jQuery(document.body).trigger("wc-enhanced-select-init");break;case"products":r.setAttribute("class","wcap_rule_value wc-product-search"),r.setAttribute("multiple","multiple"),r.setAttribute("data-action","wcap_json_find_products"),r.setAttribute("name",c+"[]"),r.setAttribute("data-placeholder",wcap_atc_rules_params.wcap_products_select),r.setAttribute("style","width:90%;"),jQuery(".wc-product-search").selectWoo(),jQuery(document.body).trigger("wc-enhanced-select-init")}}}function wcap_delete_rule_row(e){console.log("clicked");var t=e.substr(-1),a=document.getElementsByClassName("wcap-rule-list")[0].tBodies[0].rows.length;if(1==a)(c=document.createElement("a")).href="javascript:void(0)",c.classList.add("wcap_add_rule_button"),c.id="add_new",c.onclick=function(){wcap_add_new_rule_row("add_new")},c.innerHTML="<i class='fa fa-plus fa-lg fa-fw'></i> Add Rule",document.getElementById("wcap_rule_list_footer").append(c),document.getElementById("wcap-rule-list-header").style.display="none";else if(t==a){var c,r=document.getElementById(t-1).cells[3];(c=document.createElement("a")).classList.add("wcap_add_rule_button"),c.id="add_new",c.onclick=function(){wcap_add_new_rule_row("add_new")},c.href="javascript:void(0)",c.innerHTML="<i class='fa fa-plus fa-lg fa-fw'></i> Add Rule",r.append(c)}var n=document.getElementById(t);n.parentNode.removeChild(n)}function wcap_button_choice(e,t){var a=e.getAttribute(t);switch(new_state="on"===a?"off":"on",e.setAttribute(t,new_state),t){case"wcap-atc-switch-modal-mandatory":var c=document.getElementById("wcap_switch_atc_modal_mandatory"),r=document.getElementById("wcap_non_mandatory_modal_section_fields_input_text");"off"==new_state?r.removeAttribute("disabled"):"on"==new_state&&r.setAttribute("disabled","disabled");break;case"wcap-atc-switch-coupon-enable":c=document.getElementById("wcap_auto_apply_coupons_atc");break;case"wcap-atc-countdown-timer-cart-enable":c=document.getElementById("wcap_countdown_timer_cart");break;case"wcap-atc-capture-phone":"off"==new_state?jQuery(".atc_phone_field").hide():"on"==new_state&&jQuery(".atc_phone_field").show();c=document.getElementById("wcap_switch_atc_capture_phone")}c.setAttribute("value",new_state)}function wcap_atc_template_status(e){var t=e.getAttribute("wcap-atc-switch-modal-enable");new_state="on"===t?"off":"on",e.setAttribute("wcap-atc-switch-modal-enable",new_state),jQuery.post(ajaxurl,{action:"wcap_toggle_atc_enable_status",id:e.getAttribute("wcap-template-id"),new_state:new_state},function(e){})}jQuery(document).ready(function(){var e=jQuery("#wcap_atc_coupon_type").val();"unique"==e?(jQuery(".wcap_atc_pre_selected").hide(),jQuery(".wcap_atc_unique").show()):"pre-selected"==e&&(jQuery(".wcap_atc_unique").hide(),jQuery(".wcap_atc_pre_selected").show()),jQuery("#wcap_atc_coupon_type").on("change",function(){var e=jQuery("#wcap_atc_coupon_type").val();"unique"==e?(jQuery(".wcap_atc_pre_selected").hide(),jQuery(".wcap_atc_unique").show()):"pre-selected"==e&&(jQuery(".wcap_atc_unique").hide(),jQuery(".wcap_atc_pre_selected").show())})});